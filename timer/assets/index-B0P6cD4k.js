(function(){const l=document.createElement("link").relList;if(l&&l.supports&&l.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))r(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const o of e.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function s(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function r(t){if(t.ep)return;t.ep=!0;const e=s(t);fetch(t.href,e)}})();const h=1e-5;let c;const y=[];let f=!1;function g(){return window.AudioContext=window.AudioContext||window.webkitAudioContext,new window.AudioContext}function v(...n){for(const l of n)if(l<=0)return console.log(`oops ${l}`),!1;return!0}const i=document.querySelector("#play");function w(){if(!i)return;if(f){f=!1,i.textContent="go",i?.classList.remove("stop");return}for(let r of y)clearTimeout(r);const n=document.querySelector("#ramp").value,l=document.querySelector("#times").value,s=document.querySelector("#interval").value;if(i.textContent="stop",f=!0,i?.classList.add("stop"),l&&n&&s)try{const r=parseInt(l),t=parseInt(n),e=parseInt(s);let o=[];if(v(r,e)){o=o.concat(new Array(t-1).fill(700)),o.push(800),o=o.concat(new Array(r*e).fill(220));for(let a=0;a<r-1;a++)o[(a+1)*e+t-1]=440;o[o.length-1]=880,x(o)}}catch{}}function x(n){var l=c.currentTime;let s=0,r=[],t=[];for(let u=0;u<n.length;u++){var e=c.createOscillator(),o=c.createGain();t.push(o),o.connect(c.destination),r.push(e),e.onended=function(){if(s+=1,s==n.length)for(let d=0;d<n.length;d++)r[d].disconnect(t[d])},e.type="sine",e.frequency.value=n[u];const p=l+u*1,m=p+1;o.gain.exponentialRampToValueAtTime(h,m),o.gain.setValueAtTime(o.gain.value,p),e.connect(o),e.start(p),e.stop(m)}let a=setTimeout(()=>{f=!1,i&&(i.textContent="go",i.classList.remove("stop"))},1e3*n.length);y.push(a)}document.querySelector("#play")?.addEventListener("click",()=>{c&&c.close(),c=g(),w()});window.addEventListener("load",()=>{console.log("loaded")});
