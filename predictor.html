
<html>
<head>
	<title>The Paris Marathon Predictor</title>	
	<meta http-equiv="content-type" content="text/html;charset=utf-8"> 
	<style>
	  body {
		font-family: Verdana, sans;
		font-size: 11pt;		
		text-align: center;
	  }
	  #main {
		width: 50em;
		margin-left: auto;
		margin-right: auto;
		text-align: left;
	  }

	  .prompt {
		float: left;
		text-align: right;
		margin: 0 1em 0 0;
		width: 30%;
	  }
	  .input {
		float: left;
		width: 60%;			   
	  }
	  .input *{
		float: left;
	  }
	  .line {
		clear:both;
		margin: 4pt 0 4pt 0;
	  }
	  p, li {
		font-family: Georgia;
	  }
	  #answer {
		float: left;		
		/*border: 1pt solid #ccc;*/
		margin: 1em 0 0 0;
		width: 80%;
		padding: 0.5em 2em 0.5em 2em;
		border-left: 4pt #FD0 solid;
		border-right: 4pt #FD0 solid;
		border-bottom: 1pt #FD0 solid;
		border-top: 1pt #FD0 solid;
	  }
	</style>
	<script>
	function foc(){
	  document.getElementById("distance").focus();
	}

	function over(num, numDigits) {
	  num = num + "";
	  while (num.length < numDigits) {
	  num = 0+""+num;
	   }
	   return num
	}

	function riegel(time,distance1,distance2){
	  var val = time * (Math.pow((distance2*1.0)/(distance1*1.0),1.06));
	  return val;
	}
	function timeToS(time){
	  var hours = Math.floor(time);
	  var timeLeft = time - hours;
	  timeLeft *= 60.0;
	  var minutes = Math.floor(timeLeft);
	  timeLeft = timeLeft - minutes;
	  timeLeft *= 60.0;
	  var seconds = Math.round(timeLeft);	  
	  return (hours>0?hours + ":":"") + over(minutes,2) + ":" + over(seconds,2);
	}
	function predict(time) {
	  /*time /= 24.0;*/
	  var c1 = -0.419041667;
	  var c2 = 3.5535;
	  var c3 = -0.984;
	  var pred = (c1*Math.pow(time, 2.0)) + (c2*time) + (c3);
	  /*pred *= 24.0;*/
	  return pred;
	}
	function calculate(){
	  var distance = document.getElementById("distance").value;
	  var miles2km = 1.609344;
	  var in_miles = document.getElementById("miles").checked;
	  if (in_miles){
		distance *= miles2km;
	  }
	  var answer = "";
	  if (!((distance>=17) && (distance <= 25))) {
		answer = "distance must lie between 17 and 25";
	  } else {
		  var hours = document.getElementById("hours").value;
		  var minutes = document.getElementById("minutes").value;
		  var seconds = document.getElementById("seconds").value;
		  var time = (hours*1.0) + (minutes/60.0) + (seconds/3600.0);
		  if (!(time > 0)) {
			answer = "Time cannot be null";
		  } else {
			var riegel_time = riegel(time, distance, 42.195/2.0);
			var predicted_time = predict(riegel_time);
			var predicted_speed = (42.195/predicted_time);
			if (in_miles) {
			  predicted_speed /= miles2km;
			}
			predicted_speed = predicted_speed.toFixed(2)
			var speed_unit = in_miles? "mph":"km/h";
			var pace_unit = in_miles? "min/mile":"min/km";
			var pace = predicted_time/42.195;
			if (in_miles) pace *= miles2km;
			answer = "<div class=\"prompt\"><b>Half marathon time</b>: </div>" + timeToS(riegel_time) + "<br><div class=\"prompt\"><b>Marathon time</b>: </div>"+ timeToS(predicted_time)+
			  "<br><div class=\"prompt\"><b>Marathon speed</b>: </div>"+predicted_speed+" "+speed_unit+
			  "<br><div class=\"prompt\"><b>Marathon pace</b>: </div>"+timeToS(pace)+" "+pace_unit;
		  }
	  }
	  document.getElementById("answer").innerHTML=answer;
	  return false;
	}
	</script>
  </head>
  <body onload="javascript:foc()"><!-- BEGIN WAYBACK TOOLBAR INSERT -->
<script type="text/javascript" src="/static/js/timestamp.js?v=1520188417.0" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/graph-calc.js?v=1520188417.0" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/auto-complete.js?v=1520188417.0" charset="utf-8"></script>
<script type="text/javascript" src="/static/js/toolbar.js?v=1520188417.0" charset="utf-8"></script>

<style type="text/css">
body {
  margin-top:0 !important;
  padding-top:0 !important;
  /*min-width:800px !important;*/
}
.wb-autocomplete-suggestions {
    text-align: left; cursor: default; border: 1px solid #ccc; border-top: 0; background: #fff; box-shadow: -1px 1px 3px rgba(0,0,0,.1);
    position: absolute; display: none; z-index: 2147483647; max-height: 254px; overflow: hidden; overflow-y: auto; box-sizing: border-box;
}
.wb-autocomplete-suggestion { position: relative; padding: 0 .6em; line-height: 23px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; font-size: 1.02em; color: #333; }
.wb-autocomplete-suggestion b { font-weight: bold; }
.wb-autocomplete-suggestion.selected { background: #f0f0f0; }
</style>
<div id="wm-ipp" lang="en" style="display:none;direction:ltr;">
<div style="position:fixed;left:0;top:0;right:0;">
<div id="wm-ipp-inside">
  <div style="position:relative;">
    <div id="wm-logo" style="float:left;width:130px;padding-top:10px;">
      <a href="/web/" title="Wayback Machine home page"><img src="/static/images/toolbar/wayback-toolbar-logo.png" alt="Wayback Machine" width="110" height="39" border="0" /></a>
    </div>
    <div class="r" style="float:right;">
      <div id="wm-btns" style="text-align:right;height:25px;">
                  <div id="wm-save-snapshot-success">success</div>
          <div id="wm-save-snapshot-fail">fail</div>
          <a href="#"
             onclick="__wm.saveSnapshot('http://rghosh.free.fr:80/running/parispredictor.html', '20150625024618')"
             title="Share via My Web Archive"
             id="wm-save-snapshot-open"
          >
            <span class="iconochive-web"></span>
          </a>
          <a href="https://archive.org/account/login.php"
             title="Sign In"
             id="wm-sign-in"
          >
            <span class="iconochive-person"></span>
          </a>
          <span id="wm-save-snapshot-in-progress" class="iconochive-web"></span>
        	<a href="http://faq.web.archive.org/" title="Get some help using the Wayback Machine" style="top:-6px;"><span class="iconochive-question" style="color:rgb(87,186,244);font-size:160%;"></span></a>
	<a id="wm-tb-close" href="#close" onclick="__wm.h(event);return false;" style="top:-2px;" title="Close the toolbar"><span class="iconochive-remove-circle" style="color:#888888;font-size:240%;"></span></a>
      </div>
      <div id="wm-share" style="text-align:right;">
	<a href="#" onclick="window.open('https://www.facebook.com/sharer/sharer.php?u=https://web.archive.org/web/20150625024618/http://rghosh.free.fr:80/running/parispredictor.html', '', 'height=400,width=600'); return false;" title="Share on Facebook" style="margin-right:5px;" target="_blank"><span class="iconochive-facebook" style="color:#3b5998;font-size:160%;"></span></a>
	<a href="#" onclick="window.open('https://twitter.com/intent/tweet?text=https://web.archive.org/web/20150625024618/http://rghosh.free.fr:80/running/parispredictor.html&amp;via=internetarchive', '', 'height=400,width=600'); return false;" title="Share on Twitter" style="margin-right:5px;" target="_blank"><span class="iconochive-twitter" style="color:#1dcaff;font-size:160%;"></span></a>
      </div>
    </div>
    <table class="c" style="">
      <tbody>
	<tr>
	  <td class="u" colspan="2">
	    <form target="_top" method="get" action="/web/submit" name="wmtb" id="wmtb"><input type="text" name="url" id="wmtbURL" value="http://rghosh.free.fr:80/running/parispredictor.html" onfocus="this.focus();this.select();" /><input type="hidden" name="type" value="replay" /><input type="hidden" name="date" value="20150625024618" /><input type="submit" value="Go" /></form>
	  </td>
	  <td class="n" rowspan="2" style="width:110px;">
	    <table>
	      <tbody>
		<!-- NEXT/PREV MONTH NAV AND MONTH INDICATOR -->
		<tr class="m">
		  <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20150524202224/http://rghosh.free.fr:80/running/parispredictor.html" title="24 May 2015"><strong>May</strong></a></td>
		  <td class="c" id="displayMonthEl" title="You are here: 02:46:18 Jun 25, 2015">JUN</td>
		  <td class="f" nowrap="nowrap">Jul</td>
		</tr>
		<!-- NEXT/PREV CAPTURE NAV AND DAY OF MONTH INDICATOR -->
		<tr class="d">
		  <td class="b" nowrap="nowrap"><a href="https://web.archive.org/web/20150524202224/http://rghosh.free.fr:80/running/parispredictor.html" title="20:22:24 May 24, 2015"><img src="/static/images/toolbar/wm_tb_prv_on.png" alt="Previous capture" width="14" height="16" border="0" /></a></td>
		  <td class="c" id="displayDayEl" style="width:34px;font-size:24px;white-space:nowrap;" title="You are here: 02:46:18 Jun 25, 2015">25</td>
		  <td class="f" nowrap="nowrap"><img src="/static/images/toolbar/wm_tb_nxt_off.png" alt="Next capture" width="14" height="16" border="0" /></td>
		</tr>
		<!-- NEXT/PREV YEAR NAV AND YEAR INDICATOR -->
		<tr class="y">
		  <td class="b" nowrap="nowrap">2014</td>
		  <td class="c" id="displayYearEl" title="You are here: 02:46:18 Jun 25, 2015">2015</td>
		  <td class="f" nowrap="nowrap">2016</td>
		</tr>
	      </tbody>
	    </table>
	  </td>
	</tr>
	<tr>
	  <td class="s">
	    	    <div id="wm-nav-captures">
	      	      <a class="t" href="/web/20150625024618*/http://rghosh.free.fr:80/running/parispredictor.html" title="See a list of every capture for this URL">4 captures</a>
	      <div class="r" title="Timespan for captures of this URL">23 Mar 2015 - 25 Jun 2015</div>
	      </div>
	  </td>
	  <td class="k">
	    <a href="" id="wm-graph-anchor">
	      <div id="wm-ipp-sparkline" title="Explore captures for this URL" style="position: relative">
		<canvas id="wm-sparkline-canvas" width="575" height="27" border="0"></canvas>
	      </div>
	    </a>
	  </td>
	</tr>
      </tbody>
    </table>
    <div style="position:absolute;bottom:0;right:2px;text-align:right;">
      <a id="wm-expand" class="wm-btn wm-closed" href="#expand" onclick="__wm.ex(event);return false;"><span id="wm-expand-icon" class="iconochive-down-solid"></span> <span style="font-size:80%">About this capture</span></a>
    </div>
  </div>
    <div id="wm-capinfo" style="border-top:1px solid #777;display:none; overflow: hidden">
            <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center">COLLECTED BY</div>
    <div style="padding:3px;position:relative" id="wm-collected-by-content">
            <div style="display:inline-block;vertical-align:top;width:50%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls);"></span>
		Organization: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
      <div style="display:inline-block;vertical-align:top;width:49%;">
			<span class="c-logo" style="background-image:url(https://archive.org/services/img/alexacrawls)"></span>
		<div>Collection: <a style="color:#33f;" href="https://archive.org/details/alexacrawls" target="_new"><span class="wm-title">Alexa Crawls</span></a></div>
		<div style="max-height:75px;overflow:hidden;position:relative;">
	  <div style="position:absolute;top:0;left:0;width:100%;height:75px;background:linear-gradient(to bottom,rgba(255,255,255,0) 0%,rgba(255,255,255,0) 90%,rgba(255,255,255,255) 100%);"></div>
	  Starting in 1996, <a href="http://www.alexa.com/">Alexa Internet</a> has been donating their crawl data to the Internet Archive.  Flowing in every day, these data are added to the <a href="http://web.archive.org/">Wayback Machine</a> after an embargo period.
	</div>
	      </div>
    </div>
    <div style="background-color:#666;color:#fff;font-weight:bold;text-align:center" title="Timestamps for the elements of this page">TIMESTAMPS</div>
    <div>
      <div id="wm-capresources" style="margin:0 5px 5px 5px;max-height:250px;overflow-y:scroll !important"></div>
      <div id="wm-capresources-loading" style="text-align:left;margin:0 20px 5px 5px;display:none"><img src="/static/images/loading.gif" alt="loading" /></div>
    </div>
  </div></div></div></div><script type="text/javascript">
__wm.bt(575,27,25,2,"web","http://rghosh.free.fr:80/running/parispredictor.html","2015-06-25",1996);
</script>
<!-- END WAYBACK TOOLBAR INSERT -->
	<div id="main">
	  <h1>The Paris Marathon Predictor</h1>
	  <p>Enter your time on a distance between 17 and 25km. The calculator will predict your marathon time and pace for you.</p>
	  <form onsubmit="javascript:calculate();return false">
		<div class="line">
		  <div class="prompt">Distance: 
		  </div>
		  <div class="input"><input type="text" size="3" id="distance">
			<input type="radio" name="unit" value="km" checked="true" id="km">
			<label for="km">km</label>
			<input type="radio" name="unit" value="miles" id="miles">
			<label for="miles">miles</label>
		  </div>
		</div>
		<div class="line">
		  <div class="prompt">Time: 
		  </div>
		  <div class="input">
			<input type="text" size="2" id="hours"><span>:</span><input type="text" size="2" id="minutes"><span>:</span><input type="text" size="2" id="seconds">
		  </div>
		</div>
		<div class="line">
		  <div class="prompt"><input type="submit" value="calculate!"></div>
		</div>
		</form>
		<div class="line">
		  <div id="answer">&nbsp;</div>
		</div>
		<div style="clear:both"></div>
		<h2>What's this?</h2>
		<p>There are a good number of marathon time calculators on the internet. Unfortunately, most of them are targeted toward elite runners, or at least runners who log crazy hours in training. What's been lacking is a calculator that will work for the average runner.
		</p>
		<p>
		Imagine you could interview a great number of runners of all speed levels, who had run a half-marathon a few weeks before a marathon, and then ask them:
		<ol>
		  <li>What was their half-marathon time?</li>
		  <li>What was their subsequent marathon time?</li>
		</ol>
		</p>
		<p>From their (numerous) answers, you could apply some statistics and get an average marathon time as a function of one's best half-marathon effort. That's how this calculator was designed. Use it to predict your marathon time from a time on a distance close to that of a half-marathon, run a few weeks before your marathon, at best effort. 
		</p>
		<p>
		I must thank Joseph Hanan whose work in comparing half-marathon and marathon results (see <a href="https://web.archive.org/web/20150625024618/http://www.hillrunner.com/jim2/id209.html">article</a>) inspired this work.
		</p>
		<h2>How does it work?</h2>
		<p>
		Data was retrieved from the Paris half-marathon and marathon for the years 2008, 2009 and 2010. I found the names of the runners who had run both the (March) half-marathon and the (April) marathon and linked the two. Applying a polynomial fit to the data, I came up with the following equation:
		</p>
		<p>
		<code>
		  marathon time = -0.419041667*(half-marathon time)^2 + 3.5535 * (half-marathon time) - 0.984
		</code>
		</p>
		<p>
		...where all times are expressed in hours.
		</p>
		<p>
		To get the equivalent half-marathon time from the time and distance entered in the above form, I use a Riegel predictor:
		</p>
		<p>
		<code>
		  half-marathon time = entered time * (21.0975 / entered distance)^1.06
		</code>
		</p>
		<h2>How accurate is this?</h2>
		<p>
		This is a model established from the statistics of almost 10 000 runners having run both the half-marathon and marathon in Paris in the 2008-2010 period. It will not reflect the capabilities of all runners but will instead reflect an average marathon time for an amateur runner based on his half-marathon time.	
		</p>
		<p>
		<i>Note: </i>To "clean" the data somewhat, data was rejected if the ratio of marathon to half-marathon time was above 3 or below 1.7.
		</p>
		<h2>Can I see the data?</h2>
		<p>Yes. But not the names of the runners, as I feel it wouldn't be ethical to make their identies available without their consent (even if the names and times of all runners are available on the marathon and half-marathon websites) : <a href="data.csv">The data</a>.</p>
		<p>RenĂ© Ghosh, 2010-12-05</p>
		<hr>
		<p>Contact: <a href="https://web.archive.org/web/20150625024618/mailto:rene.ghosh@gmail.com">RenĂ© Ghosh</a></p>
	</div>
  </body>
</html>

